<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>测试页面999</title>    
    <script src="https://cdn.bootcdn.net/ajax/libs/dayjs/1.11.7/dayjs.min.js"></script>
    <link rel="stylesheet" href="./dist/release/iife/index.css"/>
    <!-- <script src="./dist/dev/index.js"></script> -->
    <script>
      document.write(
        `\<script src="./dist/release/iife/index.min.js?t=${new Date().getTime()}"\><\/script\>`
      );
    </script>
  </head>
  <body style="background-color: #545454;">
    <div id="demo-01" style="margin:20px 100px 0 100px;"></div>
    <div id="demo-02" style="margin:20px 100px 0 100px;"></div>
    <div id="demo-03" style="margin:20px 100px 0 100px;"></div>
    <div id="demo-04" style="margin:20px 100px 0 100px;"></div>
    <div id="demo-05" style="margin:20px 100px 0 100px;"></div>
    
    <script type="text/javascript">

    ;(function () {
        function createTimeData () {
          const now = dayjs('2023-03-08 12:00:00')
          const list = []
          for(let a=0;a<100;a++) {
            list.unshift(now.subtract(a, 'second').format('YYYY-MM-DD HH:mm:ss'))
            list.push(now.add(a+1, 'second').format('YYYY-MM-DD HH:mm:ss'))
          }
          return list
        }

        const iCanvasTimeLine = new CanvasTimeLineTheme02(document.getElementById('demo-01'), {
          scale: {
            type: 'minute',
            space: 150,
            height: 16,
            bottom: 10,
            formatter: function (datetime, index) {
              // console.log("格式化刻度", index, '=>', datetime)
              return dayjs(datetime).format("HH时mm分")
            },
            font: {
              size: 30
            }
          },
          autoplay: {
            enabled: false,
            interval: 16
          },
          label: {
            formatter: function (datetime, index) {
              // console.log("格式化提示框", index, datetime)
              return dayjs(datetime).format("YYYY/MM/DD HH:mm:ss")
            },
          },
          progress: {
            size: 60,
            padding: 20
          },
          onChange: function (datetime, next) {
            next()
          }
        })
        iCanvasTimeLine.setData(createTimeData())
        window.getTime = createTimeData
        window.test = iCanvasTimeLine
        console.log("iCanvasTimeLine", iCanvasTimeLine)
      })();

      ;(function () {
        function createTimeData () {
          const now = dayjs('2023-03-08 12:00:00')
          const list = []
          for(let a=0;a<400;a++) {
            list.unshift(now.subtract(a, 'minute').format('YYYY-MM-DD HH:mm:ss'))
            list.push(now.add(a+1, 'minute').format('YYYY-MM-DD HH:mm:ss'))
          }
          return list
        }

        const iCanvasTimeLine = new CanvasTimeLineTheme02(document.getElementById('demo-02'), {
          autoplay: {
            enabled: false
          },
          scale: {
            type: 'hour',            
          },         
          label: {
            formatter: function (datetime) {
              return dayjs(datetime).format("YYYY-MM-DD HH:mm")
            }
          },
          onChange: function (datetime, next) {
            next()
          }
        })
        iCanvasTimeLine.setData(createTimeData())
      })();

      ;(function () {
        function createTimeData () {
          const now = dayjs('2023-03-08 12:00:00')
          const list = []
          for(let a=0;a<400;a++) {
            list.unshift(now.subtract(a, 'hour').format('YYYY-MM-DD HH:mm:ss'))
            list.push(now.add(a+1, 'hour').format('YYYY-MM-DD HH:mm:ss'))
          }
          return list
        }

        const iCanvasTimeLine = new CanvasTimeLineTheme02(document.getElementById('demo-03'), {
          scale: {
            type: 'day'
          },
          onChange: function (datetime, next) {
            next()
          }
        })
        iCanvasTimeLine.setData(createTimeData())
      })();

      ;(function () {
        function createTimeData () {
          const now = dayjs('2023-03-08 12:00:00')
          const list = []
          for(let a=0;a<400;a++) {
            list.unshift(now.subtract(a, 'day').format('YYYY-MM-DD HH:mm:ss'))
            list.push(now.add(a+1, 'day').format('YYYY-MM-DD HH:mm:ss'))
          }
          return list
        }

        const iCanvasTimeLine = new CanvasTimeLineTheme02(document.getElementById('demo-04'), {
          scale: {
            type: 'month',
            formatter: function (datetime) {
              return dayjs(datetime).format("YYYY/MM")
            },
          },
          label: {
            formatter: function (datetime) {
              return dayjs(datetime).format("YYYY-MM-DD")
            }
          },
          onChange: function (datetime, next) {
            next()
          }
        })
        iCanvasTimeLine.setData(createTimeData())
      })();

      ;(function () {
        function createTimeData () {
          const now = dayjs('2023-03-08 12:00:00')
          const list = []
          for(let a=0;a<10;a++) {
            list.unshift(now.subtract(a, 'year').format('YYYY-MM-DD HH:mm:ss'))
            list.push(now.add(a+1, 'year').format('YYYY-MM-DD HH:mm:ss'))
          }
          return list
        }

        const iCanvasTimeLine = new CanvasTimeLineTheme02(document.getElementById('demo-05'), {
          scale: {
            type: 'year',
          },
          autoplay: {
            interval: 1000
          },
          label: {
            formatter: function (datetime) {
              return dayjs(datetime).format("YYYY年")
            }
          },
          onChange: function (datetime, next) {
            next()
          }
        })
        iCanvasTimeLine.setData(createTimeData())
      })();

      

      

    </script>
  </body>
</html>
